@using MachForm.NetCore.Models.MainSettings;
@using Microsoft.Extensions.Options

@inject IOptions<MainSettingsViewModel> Settings;
@inject IHttpContextAccessor ContextAccessor;

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"] - MachForm.NetCore</title>
	<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/MachForm.NetCore.styles.css" asp-append-version="true" />

	<link rel="icon" type="image/png" sizes="32x32" href="~/images/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="~/images/favicon-16x16.png">

		<link rel="stylesheet" type="text/css" href="~/css/main.css" asp-append-version="true"  media="screen">
	<link rel="stylesheet" type="text/css" href="~/css/main.mobile.css" asp-append-version="true"  media="screen">
	<link rel="stylesheet" type="text/css" href="~/css/bb_buttons.css" asp-append-version="true"  media="screen">

	<link type="text/css" href="~/css/pagination_classic.css" asp-append-version="true"  rel="stylesheet">
	<link type="text/css" href="~/css/dropui.css" asp-append-version="true"  rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="~/css/override.css" asp-append-version="true" media="screen">

	@{
		if (!string.IsNullOrWhiteSpace(Settings.Value.General.AdminTheme))
		{
			<link href="~/css/themes/theme_@(Settings.Value.General.AdminTheme).css" asp-append-version="true" rel="stylesheet" type="text/css" />
		}
	}

	<style>
		body {
			transition: opacity ease-in 0.2s;
		}

			body[unresolved] {
				opacity: 0;
				display: block;
				overflow: hidden;
				position: relative;
			}
	</style>
	<style type="text/css" data-tippy-stylesheet="">
		.tippy-iOS {
			cursor: pointer !important;
			-webkit-tap-highlight-color: transparent
		}

		.tippy-popper {
			transition-timing-function: cubic-bezier(.165,.84,.44,1);
			max-width: calc(100% - 8px);
			pointer-events: none;
			outline: 0
		}

			.tippy-popper[x-placement^=top] .tippy-backdrop {
				border-radius: 40% 40% 0 0
			}

			.tippy-popper[x-placement^=top] .tippy-roundarrow {
				bottom: -7px;
				bottom: -6.5px;
				-webkit-transform-origin: 50% 0;
				transform-origin: 50% 0;
				margin: 0 3px
			}

				.tippy-popper[x-placement^=top] .tippy-roundarrow svg {
					position: absolute;
					left: 0;
					-webkit-transform: rotate(180deg);
					transform: rotate(180deg)
				}

			.tippy-popper[x-placement^=top] .tippy-arrow {
				border-top: 8px solid #333;
				border-right: 8px solid transparent;
				border-left: 8px solid transparent;
				bottom: -7px;
				margin: 0 3px;
				-webkit-transform-origin: 50% 0;
				transform-origin: 50% 0
			}

			.tippy-popper[x-placement^=top] .tippy-backdrop {
				-webkit-transform-origin: 0 25%;
				transform-origin: 0 25%
			}

				.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible] {
					-webkit-transform: scale(1) translate(-50%,-55%);
					transform: scale(1) translate(-50%,-55%)
				}

				.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden] {
					-webkit-transform: scale(.2) translate(-50%,-45%);
					transform: scale(.2) translate(-50%,-45%);
					opacity: 0
				}

			.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible] {
				-webkit-transform: translateY(-10px);
				transform: translateY(-10px)
			}

			.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(-20px);
				transform: translateY(-20px)
			}

			.tippy-popper[x-placement^=top] [data-animation=perspective] {
				-webkit-transform-origin: bottom;
				transform-origin: bottom
			}

				.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible] {
					-webkit-transform: perspective(700px) translateY(-10px) rotateX(0);
					transform: perspective(700px) translateY(-10px) rotateX(0)
				}

				.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden] {
					opacity: 0;
					-webkit-transform: perspective(700px) translateY(0) rotateX(60deg);
					transform: perspective(700px) translateY(0) rotateX(60deg)
				}

			.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible] {
				-webkit-transform: translateY(-10px);
				transform: translateY(-10px)
			}

			.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(-10px);
				transform: translateY(-10px)
			}

			.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible] {
				-webkit-transform: translateY(-10px);
				transform: translateY(-10px)
			}

			.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(0);
				transform: translateY(0)
			}

			.tippy-popper[x-placement^=top] [data-animation=scale] {
				-webkit-transform-origin: bottom;
				transform-origin: bottom
			}

				.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible] {
					-webkit-transform: translateY(-10px) scale(1);
					transform: translateY(-10px) scale(1)
				}

				.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden] {
					opacity: 0;
					-webkit-transform: translateY(-10px) scale(.5);
					transform: translateY(-10px) scale(.5)
				}

			.tippy-popper[x-placement^=bottom] .tippy-backdrop {
				border-radius: 0 0 30% 30%
			}

			.tippy-popper[x-placement^=bottom] .tippy-roundarrow {
				top: -7px;
				-webkit-transform-origin: 50% 100%;
				transform-origin: 50% 100%;
				margin: 0 3px
			}

				.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg {
					position: absolute;
					left: 0;
					-webkit-transform: rotate(0);
					transform: rotate(0)
				}

			.tippy-popper[x-placement^=bottom] .tippy-arrow {
				border-bottom: 8px solid #333;
				border-right: 8px solid transparent;
				border-left: 8px solid transparent;
				top: -7px;
				margin: 0 3px;
				-webkit-transform-origin: 50% 100%;
				transform-origin: 50% 100%
			}

			.tippy-popper[x-placement^=bottom] .tippy-backdrop {
				-webkit-transform-origin: 0 -50%;
				transform-origin: 0 -50%
			}

				.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible] {
					-webkit-transform: scale(1) translate(-50%,-45%);
					transform: scale(1) translate(-50%,-45%)
				}

				.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden] {
					-webkit-transform: scale(.2) translate(-50%);
					transform: scale(.2) translate(-50%);
					opacity: 0
				}

			.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible] {
				-webkit-transform: translateY(10px);
				transform: translateY(10px)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(20px);
				transform: translateY(20px)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=perspective] {
				-webkit-transform-origin: top;
				transform-origin: top
			}

				.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible] {
					-webkit-transform: perspective(700px) translateY(10px) rotateX(0);
					transform: perspective(700px) translateY(10px) rotateX(0)
				}

				.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden] {
					opacity: 0;
					-webkit-transform: perspective(700px) translateY(0) rotateX(-60deg);
					transform: perspective(700px) translateY(0) rotateX(-60deg)
				}

			.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible] {
				-webkit-transform: translateY(10px);
				transform: translateY(10px)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(10px);
				transform: translateY(10px)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible] {
				-webkit-transform: translateY(10px);
				transform: translateY(10px)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateY(0);
				transform: translateY(0)
			}

			.tippy-popper[x-placement^=bottom] [data-animation=scale] {
				-webkit-transform-origin: top;
				transform-origin: top
			}

				.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible] {
					-webkit-transform: translateY(10px) scale(1);
					transform: translateY(10px) scale(1)
				}

				.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden] {
					opacity: 0;
					-webkit-transform: translateY(10px) scale(.5);
					transform: translateY(10px) scale(.5)
				}

			.tippy-popper[x-placement^=left] .tippy-backdrop {
				border-radius: 50% 0 0 50%
			}

			.tippy-popper[x-placement^=left] .tippy-roundarrow {
				right: -12px;
				-webkit-transform-origin: 33.33333333% 50%;
				transform-origin: 33.33333333% 50%;
				margin: 3px 0
			}

				.tippy-popper[x-placement^=left] .tippy-roundarrow svg {
					position: absolute;
					left: 0;
					-webkit-transform: rotate(90deg);
					transform: rotate(90deg)
				}

			.tippy-popper[x-placement^=left] .tippy-arrow {
				border-left: 8px solid #333;
				border-top: 8px solid transparent;
				border-bottom: 8px solid transparent;
				right: -7px;
				margin: 3px 0;
				-webkit-transform-origin: 0 50%;
				transform-origin: 0 50%
			}

			.tippy-popper[x-placement^=left] .tippy-backdrop {
				-webkit-transform-origin: 50% 0;
				transform-origin: 50% 0
			}

				.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible] {
					-webkit-transform: scale(1) translate(-50%,-50%);
					transform: scale(1) translate(-50%,-50%)
				}

				.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden] {
					-webkit-transform: scale(.2) translate(-75%,-50%);
					transform: scale(.2) translate(-75%,-50%);
					opacity: 0
				}

			.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible] {
				-webkit-transform: translateX(-10px);
				transform: translateX(-10px)
			}

			.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(-20px);
				transform: translateX(-20px)
			}

			.tippy-popper[x-placement^=left] [data-animation=perspective] {
				-webkit-transform-origin: right;
				transform-origin: right
			}

				.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible] {
					-webkit-transform: perspective(700px) translateX(-10px) rotateY(0);
					transform: perspective(700px) translateX(-10px) rotateY(0)
				}

				.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden] {
					opacity: 0;
					-webkit-transform: perspective(700px) translateX(0) rotateY(-60deg);
					transform: perspective(700px) translateX(0) rotateY(-60deg)
				}

			.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible] {
				-webkit-transform: translateX(-10px);
				transform: translateX(-10px)
			}

			.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(-10px);
				transform: translateX(-10px)
			}

			.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible] {
				-webkit-transform: translateX(-10px);
				transform: translateX(-10px)
			}

			.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(0);
				transform: translateX(0)
			}

			.tippy-popper[x-placement^=left] [data-animation=scale] {
				-webkit-transform-origin: right;
				transform-origin: right
			}

				.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible] {
					-webkit-transform: translateX(-10px) scale(1);
					transform: translateX(-10px) scale(1)
				}

				.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden] {
					opacity: 0;
					-webkit-transform: translateX(-10px) scale(.5);
					transform: translateX(-10px) scale(.5)
				}

			.tippy-popper[x-placement^=right] .tippy-backdrop {
				border-radius: 0 50% 50% 0
			}

			.tippy-popper[x-placement^=right] .tippy-roundarrow {
				left: -12px;
				-webkit-transform-origin: 66.66666666% 50%;
				transform-origin: 66.66666666% 50%;
				margin: 3px 0
			}

				.tippy-popper[x-placement^=right] .tippy-roundarrow svg {
					position: absolute;
					left: 0;
					-webkit-transform: rotate(-90deg);
					transform: rotate(-90deg)
				}

			.tippy-popper[x-placement^=right] .tippy-arrow {
				border-right: 8px solid #333;
				border-top: 8px solid transparent;
				border-bottom: 8px solid transparent;
				left: -7px;
				margin: 3px 0;
				-webkit-transform-origin: 100% 50%;
				transform-origin: 100% 50%
			}

			.tippy-popper[x-placement^=right] .tippy-backdrop {
				-webkit-transform-origin: -50% 0;
				transform-origin: -50% 0
			}

				.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible] {
					-webkit-transform: scale(1) translate(-50%,-50%);
					transform: scale(1) translate(-50%,-50%)
				}

				.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden] {
					-webkit-transform: scale(.2) translate(-25%,-50%);
					transform: scale(.2) translate(-25%,-50%);
					opacity: 0
				}

			.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible] {
				-webkit-transform: translateX(10px);
				transform: translateX(10px)
			}

			.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(20px);
				transform: translateX(20px)
			}

			.tippy-popper[x-placement^=right] [data-animation=perspective] {
				-webkit-transform-origin: left;
				transform-origin: left
			}

				.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible] {
					-webkit-transform: perspective(700px) translateX(10px) rotateY(0);
					transform: perspective(700px) translateX(10px) rotateY(0)
				}

				.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden] {
					opacity: 0;
					-webkit-transform: perspective(700px) translateX(0) rotateY(60deg);
					transform: perspective(700px) translateX(0) rotateY(60deg)
				}

			.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible] {
				-webkit-transform: translateX(10px);
				transform: translateX(10px)
			}

			.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(10px);
				transform: translateX(10px)
			}

			.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible] {
				-webkit-transform: translateX(10px);
				transform: translateX(10px)
			}

			.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden] {
				opacity: 0;
				-webkit-transform: translateX(0);
				transform: translateX(0)
			}

			.tippy-popper[x-placement^=right] [data-animation=scale] {
				-webkit-transform-origin: left;
				transform-origin: left
			}

				.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible] {
					-webkit-transform: translateX(10px) scale(1);
					transform: translateX(10px) scale(1)
				}

				.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden] {
					opacity: 0;
					-webkit-transform: translateX(10px) scale(.5);
					transform: translateX(10px) scale(.5)
				}

		.tippy-tooltip {
			position: relative;
			color: #fff;
			border-radius: .25rem;
			font-size: .875rem;
			padding: .3125rem .5625rem;
			line-height: 1.4;
			text-align: center;
			background-color: #333
		}

			.tippy-tooltip[data-size=small] {
				padding: .1875rem .375rem;
				font-size: .75rem
			}

			.tippy-tooltip[data-size=large] {
				padding: .375rem .75rem;
				font-size: 1rem
			}

			.tippy-tooltip[data-animatefill] {
				overflow: hidden;
				background-color: transparent
			}

			.tippy-tooltip[data-interactive], .tippy-tooltip[data-interactive] path {
				pointer-events: auto
			}

			.tippy-tooltip[data-inertia][data-state=visible] {
				transition-timing-function: cubic-bezier(.54,1.5,.38,1.11)
			}

			.tippy-tooltip[data-inertia][data-state=hidden] {
				transition-timing-function: ease
			}

		.tippy-arrow, .tippy-roundarrow {
			position: absolute;
			width: 0;
			height: 0
		}

		.tippy-roundarrow {
			width: 18px;
			height: 7px;
			fill: #333;
			pointer-events: none
		}

		.tippy-backdrop {
			position: absolute;
			background-color: #333;
			border-radius: 50%;
			width: calc(110% + 2rem);
			left: 50%;
			top: 50%;
			z-index: -1;
			transition: all cubic-bezier(.46,.1,.52,.98);
			-webkit-backface-visibility: hidden;
			backface-visibility: hidden
		}

			.tippy-backdrop:after {
				content: "";
				float: left;
				padding-top: 100%
			}

			.tippy-backdrop + .tippy-content {
				transition-property: opacity;
				will-change: opacity
			}

				.tippy-backdrop + .tippy-content[data-state=visible] {
					opacity: 1
				}

				.tippy-backdrop + .tippy-content[data-state=hidden] {
					opacity: 0
				}</style>
	<style>
		.dropui-menu li a {
			padding: 2px 0 2px 27px;
			font-size: 115%;
		}

		.dropui .dropui-tab {
			font-size: 95%;
		}

		.uploadifive-queue-item {
			border: none !important;
		}

		#uploadifive_upload_mf_form_import_file {
			z-index: 1999 !important;
		}

		#uploadifive-mf_form_import_file {
			margin: 0 auto !important;
		}
	</style>

	@await RenderSectionAsync("Styles", required: false)

</head>
<body>
	<div id="bg" class="login_page">
		<div id="container">
			<header id="header">
				@* <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
					<div class="container-fluid">
						<a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">MachForm.NetCore</a>
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
								aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
							<ul class="navbar-nav flex-grow-1">
								<li class="nav-item">
									<a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
								</li>
								<li class="nav-item">
									<a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
								</li>
							</ul>
						</div>
					</div>
				</nav> *@

				@{
					var machformLogoMain = "";

					var request = ContextAccessor.HttpContext?.Request;
					var baseUrl = $"{request?.Scheme}://{request?.Host}{request?.PathBase}";

					if (!string.IsNullOrWhiteSpace(Settings.Value.General.AdminImageUrl))
					{
						machformLogoMain = Html.Encode(Settings.Value.General.AdminImageUrl);
						<img class="title" src="@($"{baseUrl}/{machformLogoMain}")" style="margin-left: 8px;" />
					}
					else
					{
						if (!string.IsNullOrWhiteSpace(Settings.Value.General.AdminTheme))
						{
							machformLogoMain = $"{baseUrl}/images/machform_logo_{Settings.Value.General.AdminTheme}.png";
						}
						else
						{
							machformLogoMain = $"{baseUrl}/images/machform_logo_vibrant.png";
						}

						<img class="title" src="@(machformLogoMain)" style="margin-left: 8px;width: 180px" alt="MachForm" />
					}
				}


			</header>
			<div class="container">
				<main role="main" class="pb-3">
					@RenderBody()
				</main>
			</div>

			<footer class="border-top footer text-muted">
				<div class="container">
					&copy; 2025 - MachForm.NetCore - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
				</div>
			</footer>
		</div>
	</div>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="~/js/site.js" asp-append-version="true"></script>
	@await RenderSectionAsync("Scripts", required: false)
</body>
</html>
